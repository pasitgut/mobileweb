<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KKU Structured Guide - Lab 02</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&family=Figtree:wght@400;600;800&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #111111;
            --accent-color: #d35400; /* สีอิฐ มข. */
            --border-color: #e0e0e0;
            --strong-border: #111111;
            --grid-gap: 1px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Sarabun', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- Header: Glassmorphism Updated --- */
        header {
            position: fixed;
            top: 0; left: 0; width: 100%;
            padding: 0 40px;
            height: 70px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            /* เพิ่มความโปร่งใสเพื่อให้เห็น Effect Blur ชัดเจน */
            background: rgba(255, 255, 255, 0.7);
            /* เพิ่มค่า Blur */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px); /* Safari Support */
            border-bottom: 1px solid rgba(17, 17, 17, 0.1); /* เส้นขอบจางลงนิดหน่อยเพื่อให้เข้ากับกระจก */
            transition: all 0.3s ease;
        }

        nav ul {
            display: flex;
            gap: 40px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav a {
            color: var(--text-color);
            text-decoration: none;
            font-family: 'Figtree', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            padding: 5px 0;
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; width: 0%; height: 2px;
            background: var(--accent-color);
            transition: width 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        nav a:hover::after { width: 100%; }

        /* --- Hero Section (WebGL) --- */
        #gallery-container {
            width: 100%;
            height: 100vh;
            height: 100dvh; 
            padding-top: 70px; 
            position: relative;
            z-index: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fcfcfc;
            border-bottom: 1px solid var(--strong-border);
            overflow: hidden;
        }
        
        #gallery-container canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* --- Student Info Strip (Marquee Style) --- */
        .info-strip {
            border-bottom: 1px solid var(--strong-border);
            padding: 20px 5%;
            background: var(--text-color);
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .info-strip h3 {
            font-family: 'Sarabun', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            margin: 0;
        }

        .info-strip p {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            opacity: 0.8;
            margin: 0;
        }

        /* --- Grid Layout System --- */
        .grid-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            width: 100%;
            background: var(--strong-border); 
            gap: 1px; 
            border-bottom: 1px solid var(--strong-border);
        }

        /* Title Box for Landmarks */
        .section-header-box {
            background: #fff;
            padding: 60px 40px;
            grid-column: 1 / -1; 
        }

        .section-header-box h2 {
            font-family: 'Figtree', sans-serif;
            font-size: 4rem;
            line-height: 0.9;
            text-transform: uppercase;
            letter-spacing: -2px;
            margin-bottom: 20px;
        }

        .section-header-box p {
            max-width: 500px;
            color: #555;
            font-size: 1.1rem;
        }

        /* Individual Card */
        .grid-card {
            background: #fff;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: background 0.3s;
        }

        .grid-card:hover {
            background: #fafafa;
        }

        .card-image {
            width: 100%;
            aspect-ratio: 4/3; 
            overflow: hidden;
            border-bottom: 1px solid var(--strong-border);
            position: relative;
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            display: block;
        }

        .grid-card:hover .card-image img {
            transform: scale(1.05);
        }

        .card-content {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .card-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-color);
            margin-bottom: 10px;
            display: block;
        }

        .grid-card h3 {
            font-family: 'Figtree', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .grid-card p {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 20px;
            flex-grow: 1;
        }

        .mini-thumbs {
            display: flex;
            gap: 10px;
            margin-top: auto; 
        }

        .mini-thumbs img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border: 1px solid var(--border-color);
            transition: border-color 0.3s;
            cursor: pointer;
        }

        .mini-thumbs img:hover {
            border-color: var(--accent-color);
        }

        /* --- Form Section --- */
        .form-split {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-bottom: 1px solid var(--strong-border);
        }

        .form-info {
            background: var(--text-color);
            color: #fff;
            padding: 60px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .form-info h2 { font-size: 3rem; line-height: 1; margin-bottom: 20px; font-family: 'Figtree'; }
        .form-info p { opacity: 0.7; max-width: 400px; }

        .form-area {
            background: #fff;
            padding: 60px 40px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            color: #888;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 15px;
            background: #f9f9f9;
            border: 1px solid var(--border-color);
            font-family: 'Sarabun', sans-serif;
            font-size: 1rem;
            border-radius: 0; 
            transition: all 0.3s;
        }

        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: var(--strong-border);
            background: #fff;
        }

        .btn-submit {
            background: var(--accent-color);
            color: #fff;
            border: none;
            padding: 18px 30px;
            font-family: 'Figtree', sans-serif;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            width: 100%;
            border-radius: 0; 
            transition: background 0.3s;
        }

        .btn-submit:hover {
            background: #a04000;
        }

        /* --- Footer --- */
        footer {
            padding: 40px;
            text-align: center;
            background: #fff;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #888;
        }

        /* --- Responsive Tweaks --- */
        @media (max-width: 900px) {
            header {
                padding: 10px 20px; /* ลด Padding */
                height: auto; /* ให้ความสูงยืดหยุ่น */
                flex-direction: column; /* เรียงแนวตั้งบนมือถือ */
                gap: 15px;
            }
            
            nav {
                display: block; /* แสดงผล Nav กลับมา */
                width: 100%;
            }

            nav ul {
                justify-content: center; /* จัดกึ่งกลาง */
                gap: 20px; /* ลดช่องว่าง */
                font-size: 0.85rem;
            }

            .section-header-box h2 {
                font-size: 2.5rem;
            }

            .form-split {
                grid-template-columns: 1fr;
            }
            
            .info-strip {
                flex-direction: column;
                text-align: center;
            }
            
            /* ปรับระยะ WebGL ให้ไม่โดน Header ทับ */
            #gallery-container {
                padding-top: 110px; /* Header สูงขึ้นเมื่อเป็น Column */
            }
        }
        
        /* Tablet/Mobile Grid adjustments */
        @media (max-width: 600px) {
            .grid-template-columns {
                grid-template-columns: 1fr;
            }
            .section-header-box {
                padding: 40px 20px;
            }
        }
    </style>
</head>
<body>

    <!-- Header: Solid & Sticky -->
    <header>
        <div class="logo-wrapper">
            <canvas id="logoCanvas" width="160" height="40"></canvas>
        </div>
        <nav>
            <ul>
                <li><a href="#gallery-container">Guide</a></li>
                <li><a href="#landmarks">Landmarks</a></li>
                <li><a href="#contact">Add New</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero: WebGL -->
    <main id="gallery-container"></main>

    <!-- Student Info: High Contrast Strip -->
    <div class="info-strip">
        <h3>พสิษฐ์ ผลวิเศษพรสุข</h3>
        <p>ID: 663380020-7 | College of Computing, KKU</p>
    </div>

    <!-- Landmarks: Structured Grid -->
    <section id="landmarks" class="grid-section">
        <div class="section-header-box">
            <h2>Campus<br>Landmarks</h2>
            <p>สำรวจสถานที่สำคัญภายในมหาวิทยาลัยขอนแก่น ผ่านมุมมองที่แตกต่าง</p>
        </div>

        <!-- Card 1 -->
        <article class="grid-card">
            <div class="card-image">
                <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600&auto=format&fit=crop" alt="Lake">
            </div>
            <div class="card-content">
                <span class="card-number">01 / NATURE</span>
                <h3>Sithan Lake</h3>
                <p>บึงสีฐาน พื้นที่สีเขียวขนาดใหญ่ใจกลาง มข. เหมาะแก่การพักผ่อนและออกกำลังกาย</p>
                <div class="mini-thumbs">
                    <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=100">
                    <img src="https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=100">
                </div>
            </div>
        </article>

        <!-- Card 2 -->
        <article class="grid-card">
            <div class="card-image">
                <img src="https://images.unsplash.com/photo-1507842217121-9d5908b04c42?w=600&auto=format&fit=crop" alt="Library">
            </div>
            <div class="card-content">
                <span class="card-number">02 / KNOWLEDGE</span>
                <h3>Central Library</h3>
                <p>หอสมุดกลาง ศูนย์รวมแหล่งความรู้และพื้นที่ Co-working space ที่ทันสมัย</p>
                <div class="mini-thumbs">
                    <img src="https://images.unsplash.com/photo-1521587760476-6c12a4b040da?w=100">
                    <img src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=100">
                </div>
            </div>
        </article>

        <!-- Card 3 -->
        <article class="grid-card">
            <div class="card-image">
                <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=600&auto=format&fit=crop" alt="Complex">
            </div>
            <div class="card-content">
                <span class="card-number">03 / LIFESTYLE</span>
                <h3>KKU Complex</h3>
                <p>ศูนย์อาหารและบริการครบวงจร จุดนัดพบหลักของนักศึกษา</p>
                <div class="mini-thumbs">
                    <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=100">
                </div>
            </div>
        </article>

        <!-- Card 4 -->
        <article class="grid-card">
            <div class="card-image">
                <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=600&auto=format&fit=crop" alt="Computing">
            </div>
            <div class="card-content">
                <span class="card-number">04 / TECH</span>
                <h3>College of Computing</h3>
                <p>ตึกวิทยาลัยการคอมพิวเตอร์ ศูนย์กลางนวัตกรรมและเทคโนโลยี</p>
                <div class="mini-thumbs">
                    <img src="https://images.unsplash.com/photo-1531482615713-2afd69097998?w=100">
                </div>
            </div>
        </article>
    </section>

    <!-- Form Section: Split Layout -->
    <section id="contact" class="form-split">
        <div class="form-info">
            <h2>Recommend<br>A Place</h2>
            <p>ร่วมแบ่งปันสถานที่น่าสนใจในมุมมองของคุณ เพื่อให้ Campus Guide สมบูรณ์ยิ่งขึ้น</p>
        </div>
        <div class="form-area">
            <form action="https://api.web3forms.com/submit" method="POST">
                <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY_HERE">

                <div class="input-group">
                    <label>Place Name</label>
                    <input type="text" name="place" placeholder="ชื่อสถานที่..." required>
                </div>

                <div class="input-group">
                    <label>Description</label>
                    <textarea name="details" rows="4" placeholder="รายละเอียด..." required></textarea>
                </div>

                <div class="input-group">
                    <label>Image URL</label>
                    <input type="url" name="image_url" placeholder="https://...">
                </div>

                <button type="submit" class="btn-submit">Submit Data</button>
            </form>
        </div>
    </section>

    <footer>
        <div style="margin-bottom: 20px;">
            <canvas id="footerLogoCanvas" width="40" height="40"></canvas>
        </div>
        &copy; 2025 KKU Structured Guide. Lab 02 Assignment.
    </footer>

    <!-- Scripts -->
    <script type="module">
        import { Renderer, Camera, Transform, Plane, Mesh, Program, Texture } from 'https://cdn.jsdelivr.net/npm/ogl@0.0.32/dist/ogl.mjs';

        // --- 1. Robust Logo Drawing ---
        function initLogo(canvasId, color = "#111") {
            const canvas = document.getElementById(canvasId);
            if(!canvas) return;

            // Fix DPI issues
            const dpr = window.devicePixelRatio || 1;
            const width = parseInt(canvas.getAttribute("width"));
            const height = parseInt(canvas.getAttribute("height"));
            
            // Set display size via CSS
            canvas.style.width = width + "px";
            canvas.style.height = height + "px";
            // Set actual buffer size
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            
            let frame = 0;

            function draw() {
                ctx.clearRect(0, 0, width, height);
                
                // Text
                if (width > 50) { // Only draw text for header logo
                    ctx.font = "800 18px Figtree";
                    ctx.fillStyle = color;
                    ctx.fillText("KKU GUIDE", 50, 26);
                }

                // Icon: Square Focus (Boxy Style)
                const cx = width > 50 ? 20 : 20;
                const cy = 20;

                ctx.save();
                ctx.translate(cx, cy);

                // Rotating Squares
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                
                // Outer Square
                ctx.strokeRect(-8, -8, 16, 16);
                
                // Inner Square (Rotating)
                ctx.rotate(frame * 0.02);
                ctx.fillStyle = "#d35400";
                ctx.fillRect(-4, -4, 8, 8);

                ctx.restore();
                
                frame++;
                requestAnimationFrame(draw);
            }
            draw();
        }
        
        // --- 2. WebGL Logic (Boxy Version) ---
        // Reuse same logic but tune aesthetics
        function debounce(func, wait) {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }
        function lerp(p1, p2, t) { return p1 + (p2 - p1) * t; }
        
        function createTextTexture(gl, text, font = '800 60px Figtree', color = '#111') { 
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            context.font = font;
            const metrics = context.measureText(text);
            const textWidth = Math.ceil(metrics.width);
            const textHeight = Math.ceil(parseInt(font, 10) * 1.2);
            canvas.width = textWidth + 20;
            canvas.height = textHeight + 20;
            context.font = font;
            context.fillStyle = color;
            context.textBaseline = 'middle';
            context.textAlign = 'center';
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.fillText(text, canvas.width / 2, canvas.height / 2);
            const texture = new Texture(gl, { generateMipmaps: false });
            texture.image = canvas;
            return { texture, width: canvas.width, height: canvas.height };
        }

        class Title {
            constructor({ gl, plane, renderer, text, textColor = '#111', font }) {
                this.gl = gl;
                this.plane = plane;
                this.renderer = renderer;
                this.text = text;
                this.textColor = textColor;
                this.font = font;
                this.createMesh();
            }
            createMesh() {
                const { texture, width, height } = createTextTexture(this.gl, this.text, this.font, this.textColor);
                const geometry = new Plane(this.gl);
                const program = new Program(this.gl, {
                    vertex: `attribute vec3 position; attribute vec2 uv; uniform mat4 modelViewMatrix; uniform mat4 projectionMatrix; varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`,
                    fragment: `precision highp float; uniform sampler2D tMap; varying vec2 vUv; void main() { vec4 color = texture2D(tMap, vUv); if (color.a < 0.1) discard; gl_FragColor = color; }`,
                    uniforms: { tMap: { value: texture } },
                    transparent: true
                });
                this.mesh = new Mesh(this.gl, { geometry, program });
                const aspect = width / height;
                const textHeight = this.plane.scale.y * 0.15;
                const textWidth = textHeight * aspect;
                this.mesh.scale.set(textWidth, textHeight, 1);
                this.mesh.position.y = -this.plane.scale.y * 0.5 - textHeight * 0.5 - 0.05;
                this.mesh.setParent(this.plane);
            }
        }

        class Media {
            constructor({ geometry, gl, image, index, length, renderer, scene, screen, text, viewport, bend, textColor, borderRadius = 0, font }) {
                this.extra = 0;
                this.geometry = geometry;
                this.gl = gl;
                this.image = image;
                this.index = index;
                this.length = length;
                this.renderer = renderer;
                this.scene = scene;
                this.screen = screen;
                this.text = text;
                this.viewport = viewport;
                this.bend = bend;
                this.textColor = textColor;
                this.borderRadius = borderRadius;
                this.font = font;
                this.createShader();
                this.createMesh();
                this.createTitle();
                this.onResize();
            }

            createShader() {
                const texture = new Texture(this.gl, { generateMipmaps: true });
                this.program = new Program(this.gl, {
                    depthTest: false,
                    depthWrite: false,
                    vertex: `
                        precision highp float; attribute vec3 position; attribute vec2 uv; uniform mat4 modelViewMatrix; uniform mat4 projectionMatrix; uniform float uTime; uniform float uSpeed; varying vec2 vUv; varying float vSpeed;
                        void main() {
                            vUv = uv; vSpeed = uSpeed; vec3 p = position;
                            // Minimal distortion for Boxy look
                            p.z = (sin(p.x * 2.0 + uTime) * 0.5) * (0.1 + uSpeed * 0.2); 
                            gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);
                        }
                    `,
                    fragment: `
                        precision highp float; uniform vec2 uImageSizes; uniform vec2 uPlaneSizes; uniform sampler2D tMap; uniform float uBorderRadius; uniform float uTime; varying float vSpeed; varying vec2 vUv;
                        void main() {
                            vec2 ratio = vec2(min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0), min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0));
                            vec2 uv = vec2(vUv.x * ratio.x + (1.0 - ratio.x) * 0.5, vUv.y * ratio.y + (1.0 - ratio.y) * 0.5);
                            
                            // Subtle RGB Shift
                            float rgbStrength = vSpeed * 0.01; 
                            vec4 colorR = texture2D(tMap, uv + vec2(rgbStrength, 0.0));
                            vec4 colorG = texture2D(tMap, uv);
                            vec4 colorB = texture2D(tMap, uv - vec2(rgbStrength, 0.0));
                            vec4 color = vec4(colorR.r, colorG.g, colorB.b, 1.0);
                            
                            // No rounded corners! (Boxy)
                            gl_FragColor = vec4(color.rgb, 1.0);
                        }
                    `,
                    uniforms: { tMap: { value: texture }, uPlaneSizes: { value: [0, 0] }, uImageSizes: { value: [0, 0] }, uSpeed: { value: 0 }, uTime: { value: 0 }, uBorderRadius: { value: 0 } },
                    transparent: true
                });
                const img = new Image(); img.crossOrigin = 'anonymous'; img.src = this.image;
                img.onload = () => { texture.image = img; this.program.uniforms.uImageSizes.value = [img.naturalWidth, img.naturalHeight]; };
            }
            createMesh() { this.plane = new Mesh(this.gl, { geometry: this.geometry, program: this.program }); this.plane.setParent(this.scene); }
            createTitle() { this.title = new Title({ gl: this.gl, plane: this.plane, renderer: this.renderer, text: this.text, textColor: this.textColor, font: this.font }); }
            update(scroll, direction) {
                this.plane.position.x = this.x - scroll.current - this.extra;
                // Keep it flat (Boxy)
                this.plane.position.y = 0; 
                this.plane.rotation.z = 0;
                
                this.speed = scroll.current - scroll.last; this.program.uniforms.uTime.value += 0.04; this.program.uniforms.uSpeed.value = this.speed;
                const planeOffset = this.plane.scale.x / 2; const viewportOffset = this.viewport.width / 2;
                this.isBefore = this.plane.position.x + planeOffset < -viewportOffset; this.isAfter = this.plane.position.x - planeOffset > viewportOffset;
                if (direction === 'right' && this.isBefore) { this.extra -= this.widthTotal; this.isBefore = this.isAfter = false; }
                if (direction === 'left' && this.isAfter) { this.extra += this.widthTotal; this.isBefore = this.isAfter = false; }
            }
            onResize({ screen, viewport } = {}) {
                if (screen) this.screen = screen; if (viewport) { this.viewport = viewport; if (this.plane.program.uniforms.uViewportSizes) this.plane.program.uniforms.uViewportSizes.value = [this.viewport.width, this.viewport.height]; }
                
                // Optimized for Boxy Fullscreen
                const isMobile = this.screen.width < 768;
                this.scale = isMobile ? (this.screen.height / 1200) : (this.screen.height / 1400); 
                
                this.plane.scale.y = (this.viewport.height * (800 * this.scale)) / this.screen.height; 
                const baseWidth = isMobile ? 800 : 900;
                this.plane.scale.x = (this.viewport.width * (baseWidth * this.scale)) / this.screen.width;
                
                this.plane.program.uniforms.uPlaneSizes.value = [this.plane.scale.x, this.plane.scale.y]; 
                this.padding = 1; 
                this.width = this.plane.scale.x + this.padding; 
                this.widthTotal = this.width * this.length; 
                this.x = this.width * this.index;
            }
        }

        class App {
            constructor(container, { items, bend, textColor, borderRadius, font }) {
                this.container = container; this.scroll = { ease: 0.04, current: 0, target: 0, last: 0 }; this.onCheckDebounce = debounce(this.onCheck.bind(this), 200);
                this.createRenderer(); this.createCamera(); this.createScene(); this.onResize(); this.createGeometry(); this.createMedias(items, bend, textColor, borderRadius, font); this.update(); this.addEventListeners();
            }
            createRenderer() { this.renderer = new Renderer({ alpha: true, antialias: true, dpr: Math.min(window.devicePixelRatio || 1, 2) }); this.gl = this.renderer.gl; this.gl.clearColor(0, 0, 0, 0); this.container.appendChild(this.gl.canvas); }
            createCamera() { this.camera = new Camera(this.gl); this.camera.fov = 45; this.camera.position.z = 20; }
            createScene() { this.scene = new Transform(); }
            createGeometry() { this.planeGeometry = new Plane(this.gl, { heightSegments: 10, widthSegments: 20 }); }
            createMedias(items, bend = 1, textColor, borderRadius, font) {
                this.mediasImages = items.concat(items);
                this.medias = this.mediasImages.map((data, index) => new Media({ geometry: this.planeGeometry, gl: this.gl, image: data.image, index, length: this.mediasImages.length, renderer: this.renderer, scene: this.scene, screen: this.screen, text: data.text, viewport: this.viewport, bend, textColor, borderRadius, font }));
            }
            onTouchDown(e) { this.isDown = true; this.scroll.position = this.scroll.current; this.start = e.touches ? e.touches[0].clientX : e.clientX; }
            onTouchMove(e) { if (!this.isDown) return; const x = e.touches ? e.touches[0].clientX : e.clientX; const distance = (this.start - x) * 0.05; this.scroll.target = this.scroll.position + distance; }
            onTouchUp() { this.isDown = false; this.onCheck(); }
            onWheel(e) { const delta = e.deltaY || e.wheelDelta || e.detail; this.scroll.target += delta * 0.05; this.onCheckDebounce(); }
            onCheck() { if (!this.medias || !this.medias[0]) return; const width = this.medias[0].width; const itemIndex = Math.round(Math.abs(this.scroll.target) / width); const item = width * itemIndex; this.scroll.target = this.scroll.target < 0 ? -item : item; }
            onResize() {
                this.screen = { width: this.container.clientWidth, height: this.container.clientHeight }; this.renderer.setSize(this.screen.width, this.screen.height); this.camera.perspective({ aspect: this.screen.width / this.screen.height });
                const fov = (this.camera.fov * Math.PI) / 180; const height = 2 * Math.tan(fov / 2) * this.camera.position.z; const width = height * this.camera.aspect; this.viewport = { width, height };
                if (this.medias) this.medias.forEach(media => media.onResize({ screen: this.screen, viewport: this.viewport }));
            }
            update() {
                this.scroll.current = lerp(this.scroll.current, this.scroll.target, this.scroll.ease); const direction = this.scroll.current > this.scroll.last ? 'right' : 'left';
                if (this.medias) this.medias.forEach(media => media.update(this.scroll, direction));
                this.renderer.render({ scene: this.scene, camera: this.camera }); this.scroll.last = this.scroll.current; requestAnimationFrame(this.update.bind(this));
            }
            addEventListeners() {
                window.addEventListener('resize', this.onResize.bind(this)); this.container.addEventListener('wheel', this.onWheel.bind(this)); this.container.addEventListener('mousedown', this.onTouchDown.bind(this)); this.container.addEventListener('mousemove', this.onTouchMove.bind(this)); this.container.addEventListener('mouseup', this.onTouchUp.bind(this)); this.container.addEventListener('touchstart', this.onTouchDown.bind(this)); this.container.addEventListener('touchmove', this.onTouchMove.bind(this)); this.container.addEventListener('touchend', this.onTouchUp.bind(this));
            }
        }

        const galleryItems = [
            { image: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=800&auto=format&fit=crop', text: 'SITHAN' },
            { image: 'https://images.unsplash.com/photo-1507842217121-9d5908b04c42?w=800&auto=format&fit=crop', text: 'LIBRARY' },
            { image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=800&auto=format&fit=crop', text: 'COMPLEX' },
            { image: 'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&auto=format&fit=crop', text: 'COMPUTING' },
            { image: 'https://images.unsplash.com/photo-1525625293386-3f8f99389edd?w=800&auto=format&fit=crop', text: 'JUBILEE' },
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('gallery-container');
            new App(container, {
                items: galleryItems,
                bend: 0, // Flat (Boxy)
                textColor: '#111', 
                borderRadius: 0, /* Strict Boxy aesthetic */
                font: '800 60px Figtree'
            });
            
            initLogo('logoCanvas', '#111');
            initLogo('footerLogoCanvas', '#888');
        });
    </script>
</body>
</html>
